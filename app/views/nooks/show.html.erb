<%# nooks#show - app/views/nooks/show.html.erb %>
<%= link_to "Log out", destroy_user_session_path, data: {turbo_method: :delete}, class: "dropdown-item" %>
<%# center this somehow %>
<div class="container my-4">
  <div class="nook-header">
    <h1><%= @nook.name %></h1>
    <h4 data-controller="typed" data-typed-strings-value="<%= @nook.longitude %>">[<%= @nook.longitude %>, <%= @nook.latitude %>]</h4>
  </div>
</div>

<%# create a light box shadow (glow) %>

<div class="container-fluid show-images mb-5" data-controller="swiper">
  <div class="swiper">
    <%= image_tag "#{@nook.id}.png", class: 'img-fluid rounded-4 border' %>
    <%# <%= cl_image_tag "BOOKABOOK/Morgenstern_Erin_-_The_Night_Circus_ypcbjf", width: 200, crop: :fill, gravity: :face  %>
  </div>
</div>

<%# Display this nook's footnotes %>
<div class="container-fluid show-details mb-5">
  <div class="post-it">
    <div class="note"><%= @nook.description %>
    <h6>Signed, <%= @nook.user.username %></h6>
    </div>
  </div>
</div>

<% if current_user == @nook.user %>
  <div>
  <td><%= link_to 'Delete nook', nook_path(@nook), data: {turbo_method: :delete, turbo_confirm: "Are you sure?"} %></td>
  <%= link_to "Edit nook", edit_nook_path(@nook) %>
  </div>
<% end %>

<%# Add Footnote form %>
<div data-controller="toggle" class="container all-footnotes mb-5">
  <button data-action="click->toggle#fire" class="btn btn-outline-primary">Write a Footnote</button>
    <div data-toggle-target="togglableElement" class="d-none">
      <%= render 'footnotes/footnote', nook: @nook, footnote: @footnote %>
    </div>
  </div
  
<div class="container all-footnotes mb-5">
    <% @footnotes.each do |footnote| %>
      <div class="footnote-inner">
          <p><%= footnote.text %></p>
          <%= link_to "#{footnote.user[:username]}" %>
      </div>
    <% end %>

<div class="nook-map" style="width: 100vw; height: 200px;"
  data-controller="map"
  data-map-markers-value="<%= @marker.to_json %>"
  data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"></div>
</div>
